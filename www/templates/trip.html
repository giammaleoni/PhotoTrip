<ion-view title="{{trip.title}}">

  <ion-nav-buttons side="right">
    <!-- nascondo il checkbox per abilitare le modifiche se è un nuovo trip o se non sono l'amministratore del viaggio -->
    <label class="toggle toggle-positive"  ng-hide='newTrip+!imAdmin'>
      <input type="checkbox" ng-model='$parent.editable'>
      <div class="track">
        <div class="handle"></div>
      </div>
    </label>
  </ion-nav-buttons>

  <ion-content padding="true" class="has-header">
        <form ng-submit="createTrip()">
            <label class="item item-input">
              <i class="icon ion-paper-airplane placeholder-icon positive"></i>
                <span class="input-label">Trip Title</span>
                <input type="text" ng-model="trip.title" ng-disabled="!editable">
            </label>

            <div class="spacer" style="width: 300px; height: 26px;"></div>

            <label class="item item-input">
                <i class="icon ion-location placeholder-icon positive"></i>
                <span class="input-label">Where</span>
                <input type="search" ng-model="trip.where" ng-disabled="!editable">
            </label>

            <div class="spacer" style="width: 300px; height: 26px;"></div>

            <label class="item item-input">
              <i class="icon ion-calendar placeholder-icon positive"></i>
              <span class="input-label">Dates</span>
              <input date-range-picker class="date-picker span" type="text" ng-model="datePicker.date" options="options" ng-disabled="!editable">
            </label>

            <div class="list card">
                <div class="item item-stable item-button-right">
            Trip Mates
            <a class="button button-positive button-clear" ng-href="#/app/trips/{{tripId}}/friends" ng-disabled="!editable">Edit</a>
            </div>
                <div class="item item-body">
                    <ion-list>
                        <!-- me -->
                        <ion-item class="item-avatar-left" ng-if='newTrip'>
                            <img ng-src="{{profilePic}}">
                            <span class="item-note" ng-if="imAdmin">
                              Admin
                            </span>
                            <span class="item-note" ng-if="newTrip">
                              Admin
                            </span>
                            <h2>{{user.name}} {{user.surname}}</h2>
                            <!-- <p>{{user.other}}</p> -->
                        </ion-item>
                        <!-- my friends -->
                        <ion-item ng-repeat="mate in mates | orderBy:'surname' | myMates:trip.mates"
                                  class="item-avatar-left" >
                            <img ng-src="{{mate.url}}" ng-if='mate.url'>
                            <img ng-src="/img/avatar.png" ng-if='!mate.url'>
                            <!-- ng-if se è amministratore -->
                            <span class="item-note" ng-if="trip.admin==mate.$id">
                              Admin
                            </span>
                            <h2>{{mate.name}} {{mate.surname}}</h2>
                            <!-- <p>{{friend.other}}</p> -->
                        </ion-item>
                    </ion-list>
                </div>
            </div>

            <button class="button button-block button-positive" type="submit" id="btnCreateTrip" ng-show='newTrip'>Create Trip</button>
        </form>

    </ion-content>

    <div class="tabs-striped tabs-bottom tabs-background-stable tabs-color-positive" ng-hide='newTrip'>
      <div class="tabs tabs-icon-top">
        <a class="tab-item active" ng-href="#/app/trips/{{trip.id}}">
          <i class="icon ion-home"></i>
          Home
        </a>
        <a class="tab-item" ng-href="#/app/trips/{{trip.id}}/album">
          <i class="icon ion-images"></i>
          Album
        </a>
        <a class="tab-item" ng-href="#/app/trips/{{trip.id}}/map">
          <i class="icon ion-location"></i>
          Map
        </a>
      <a class="tab-item" ng-href="#/app/trips/{{trip.id}}/camera">
          <i class="icon ion-camera"></i>
          Photo
        </a>
      </div>
    </div>

</ion-view>
